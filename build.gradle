buildscript {
    ext {
        groovyAllVersion = '3.0.9'
        junitVersion = '5.8.1'
        spockVersion = '2.0-groovy-3.0'
        spotlessVersion = '6.0.0'
        spockReportsVersion = '2.1.1-groovy-3.0'
    }
}

plugins {
    id 'idea'
    id 'java'
    id 'groovy'
    id 'com.diffplug.spotless' version "$spotlessVersion"
}

project('core-processing') {
    apply plugin: 'groovy'
}

subprojects {
    group 'pl.edu.pw.ljozwiak'
    version '1.0-SNAPSHOT'

    repositories {
        mavenCentral()
    }

    apply plugin: 'java'
    apply plugin: 'groovy'
    apply plugin: 'com.diffplug.spotless'

    dependencies {
        constraints {
            testImplementation "org.codehaus.groovy:groovy-all:$groovyAllVersion"
            testImplementation "org.junit.jupiter:junit-jupiter-api:$junitVersion"
            testImplementation "org.spockframework:spock-core:$spockVersion"
            testImplementation "com.athaydes:spock-reports:$spockReportsVersion"
            testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:$junitVersion"
        }
    }

    spotless {
        java {
            googleJavaFormat()
        }
    }

    test {
        useJUnitPlatform()
    }

    sourceSets {
        test.groovy.srcDirs(
            'src/test/common',
            'src/test/unit',
            'src/test/integration',
            'src/test/functional'
        )
    }
}